var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,i=(e,t)=>{for(var l in t||(t={}))u.call(t,l)&&n(e,l,t[l]);if(a)for(var l of a(t))s.call(t,l)&&n(e,l,t[l]);return e};"undefined"!=typeof require&&require;import{d as o,r,a as d,o as p,c as f,w as c,u as v,N as h,b as m,e as y,f as b,g,h as C,i as w,j as B,k as x,l as _,m as k,R as A,n as q,v as R,p as T,q as D,s as S,t as U,x as I,y as V,z as E,F as L,A as O,B as F,C as N,D as z,E as j,G as M,H as P,I as W,J as $,K as J,L as G,M as H,O as K,P as Z,Q,S as X,T as Y,U as ee,V as te,W as le,X as ae,Y as ue,Z as se,_ as ne,$ as ie,a0 as oe,a1 as re,a2 as de,a3 as pe,a4 as fe,a5 as ce,a6 as ve,a7 as he,a8 as me,a9 as ye,aa as be,ab as ge,ac as Ce,ad as we,ae as Be,af as xe,ag as _e}from"./vendor.52d330d4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ke={class:"ui-logo"},Ae=C("img",{src:"./img/logo.png",alt:"碧蓝航线CD计算工具"},null,-1),qe=_("碧蓝航线CD计算工具·Beta");var Re,Te,De,Se,Ue,Ie,Ve,Ee,Le,Oe,Fe,Ne,ze=o({setup(e){function t(e){return k(A,{to:e.key},{default:()=>e.label})}const l=[{label:"CD模拟",key:"/"},{label:"舰娘管理",key:"/ships"},{label:"设置",key:"/config"}],a=r(location.hash.substring(1)),u=r(!1);return(e,s)=>{const n=d("router-view");return p(),f(v(h),null,{default:c((()=>[m(v(y),null,{default:c((()=>[m(v(x),{style:{height:"100%"}},{default:c((()=>[m(v(b),{class:"header-menu",bordered:""},{default:c((()=>[m(v(g),{align:"center"},{default:c((()=>[C("div",ke,[Ae,m(v(w),null,{default:c((()=>[qe])),_:1})]),m(v(B),{value:a.value,"onUpdate:value":s[0]||(s[0]=e=>a.value=e),mode:"horizontal",collapsed:u.value,options:l,"render-label":t},null,8,["value","collapsed"])])),_:1})])),_:1}),m(v(x),null,{default:c((()=>[m(n)])),_:1})])),_:1})])),_:1})])),_:1})}}});function je(e,t){return e/6/Math.sqrt(3.14*(t+100))}function Me(e){let t=tt.state.shipTemplates[e.templateId];if(!t)return 0;let l=t.reload,a=e.lvl,u=function(e){switch(e){case"陌生":return 1;case"友好":return 1.01;case"喜欢":return 1.03;case"爱":return 1.06;case"誓约":return 1.09;case"誓约200":return 1.12}return 1}(e.intimacy),s=(l[0]+(a-1)*l[1]/1e3+(a-100)*l[2]/1e3+l[3])*u+l[4];return Math.floor(s)}function Pe(e,t){if(e.type===Le.Self)return t.id===e.args;if(e.type===Le.ByType)return He(e.args,t.type);if(e.type===Le.ByCamp)return He(e.args,t.camp);if(e.type===Le.And){for(let l of e.args)if(!Pe(l,t))return!1;return!0}if(e.type===Le.Or){for(let l of e.args)if(Pe(l,t))return!0;return!1}}function We(e,t){return e.off||e.target&&!Pe(e.target,t)?"off":e.removeTrigger||e.trigger.type!==Ue.BattleStart||e.duration?"condition":"on"}function $e(e,t){let l={ReloadAdd:0,ReloadAddRatio:0,CDAddRatio:0,FirstCDAddRatio:0};for(let a of e)"on"===We(a,t)&&(l[a.type]+=a.value);return l}function Je(e){var t;let l=0;for(let a=3;a<5;++a){let u=e[a];if(0===u)continue;let s=tt.state.equips[u];if(s)for(let e of(null==(t=s.buffs)?void 0:t.length)?s.buffs:[])if(e.type===De.ReloadAdd&&e.trigger.type===Ue.Equip){if(!e.value)continue;l+=e.value}}return l}function Ge(e,t){if(!e.id)return{};let l={ids:e.equips},a=tt.state.ships[e.id],u=tt.state.shipTemplates[a.templateId],s=Je(e.equips),n=function(e,t,l){let a={};for(let u in t)a[u]=t[u];for(let u of e){if(0===u)continue;let e=tt.state.equips[u];if(!e||!e.buffs)continue;let t=$e(e.buffs,l);for(let l in t)a[l]=(a[l]||0)+t[l]}return a}(e.equips,t,u),i=a.reload+s+(n.ReloadAdd||0),o=i*(1+(n.ReloadAddRatio||0)/100);l.reload={base:a.reload,equip:s,extra:n,real:o};let r=0;if(u.type===Ve.BB||u.type===Ve.BC||u.type===Ve.BV){if(0===e.equips[0])return l;r=tt.state.equips[e.equips[0]].cd||0}else{let t=0,l=0;for(let a=0;a<3;++a){let s=e.equips[a];0!==s&&(t+=u.equipCnt[a],l+=u.equipCnt[a]*(tt.state.equips[s].cd||100))}r=2.2*l/t}return l.rawEquipCD=r,l.dispCD=je(r,i).toFixed(2),l.realCD=je(r,o)*(1+(n.CDAddRatio||0)/100),l}function He(e,t){for(let l of e)if(l===t)return!0;return!1}function Ke(e,t){return t===Ve.BB?e.BB:t===Ve.BC?e.BC:t===Ve.BV?e.BV:t===Ve.CV?e.CV:t===Ve.CVL?e.CVL:0}(Te=Re||(Re={})).BB="BB",Te.CV="CV",(Se=De||(De={})).ReloadAdd="ReloadAdd",Se.ReloadAddRatio="ReloadAddRatio",Se.CDAddRatio="CDAddRatio",(Ie=Ue||(Ue={})).Equip="Equip",Ie.Tech="Tech",Ie.BattleStart="BattleStart",Ie.WeaponReady="WeaponReady",Ie.UseWeapon="UseWeapon",Ie.Scheduled="Scheduled",(Ee=Ve||(Ve={}))[Ee.BC=4]="BC",Ee[Ee.BB=5]="BB",Ee[Ee.BV=10]="BV",Ee[Ee.CVL=6]="CVL",Ee[Ee.CV=7]="CV",(Oe=Le||(Le={})).Self="Self",Oe.ByType="Type",Oe.ByCamp="ByCamp",Oe.And="And",Oe.Or="Or",(Ne=Fe||(Fe={}))[Ne.artillery=4]="artillery",Ne[Ne.fighter=7]="fighter",Ne[Ne.torpedo_bomber=8]="torpedo_bomber",Ne[Ne.dive_bomber=9]="dive_bomber",Ne[Ne.auxiliaryCV=101]="auxiliaryCV",Ne[Ne.auxiliaryBB=102]="auxiliaryBB";function Ze(e,t){if(!t)return!1;if(t.type===Ue.Scheduled)return e.ts>(t.args&&t.args[0]||0);if(t.type===Ue.UseWeapon){let l=t.args&&t.args[0]||1;return e.useAt.length>=l}if(t.type===Ue.WeaponReady){let l=t.args&&t.args[0]||1;return e.readyAt.length>=l}return!1}function Qe(e,t){if(!t.trigger)return!1;if(t.trigger.type===Ue.Equip)return!1;if(t.trigger.type===Ue.BattleStart)return!(t.duration&&e.ts>30*t.duration)&&!Ze(e,t.removeTrigger);if(t.trigger.type===Ue.Scheduled){let l=t.trigger.args;if(!l)return!(t.duration&&e.ts>30*t.duration);if(t.duration){let a=30*t.duration,u=30*l[0],s=30*l[1];if(e.ts<s)return!1;if((e.ts-s)%u>=a)return!1}return!Ze(e,t.removeTrigger)}if(t.trigger.type===Ue.UseWeapon){let l=e.useAt.length;if(0===l)return!1;let a=t.trigger.args||[1,1];if(l<a[1])return!1;if((l-a[1])%a[0]!=0)return!1;if(t.duration){if(e.ts-e.useAt.slice(-1)[0]>=30*t.duration)return!1}return!Ze(e,t.removeTrigger)}if(t.trigger.type===Ue.WeaponReady){let l=e.readyAt.length;if(0===l)return!1;let a=t.trigger.args||[1,1];if(l<a[1])return!1;if((l-a[1])%a[0]!=0)return!1;if(t.duration){if(e.ts-e.readyAt.slice(-1)[0]>=30*t.duration)return!1}return!Ze(e,t.removeTrigger)}return 0}function Xe(e,t){let l={ReloadAdd:0,ReloadAddRatio:0,CDAddRatio:0};for(let a of e)Qe(t,a)&&(l[a.type]+=a.value);return l}function Ye(e){let t=[],l=[];for(let n of e.ships){if(!n.id)continue;let t=tt.state.ships[n.id],a=tt.state.shipTemplates[t.templateId],u=Re.BB;a.type!==Ve.CV&&a.type!==Ve.CVL||(u=Re.CV);let s={id:n.id,ship:n,refShip:t,templ:a,cdType:u,reload:t.reload+Je(n.equips)+Ke(e.tech,a.type),buffs:[],progress:0,readyAt:[],useAt:[],rawCD:0};if(s.cdType===Re.BB)s.rawCD=(tt.state.equips[n.equips[0]]||{}).cd||NaN;else{let e=0,t=0;for(let l=0;l<3;++l){let u=n.equips[l];0!==u&&(e+=a.equipCnt[l],t+=a.equipCnt[l]*(tt.state.equips[u].cd||NaN))}s.rawCD=2.2*t/e}if(!isNaN(s.rawCD)){for(let t of e.ships)for(let e of t.buffs||[])Pe(e.target,a)&&s.buffs.push(e);n.extraBuff.ReloadAddRatio&&s.buffs.push({id:"手动设置的装填Buff",type:De.ReloadAddRatio,value:n.extraBuff.ReloadAddRatio,trigger:{type:Ue.BattleStart},target:{type:Le.Self,args:n.id}}),n.extraBuff.CDAddRatio&&s.buffs.push({id:"手动设置的CD Buff",type:De.CDAddRatio,value:-n.extraBuff.CDAddRatio,trigger:{type:Ue.BattleStart},target:{type:Le.Self,args:n.id}}),n.extraBuff.FirstCDAddRatio&&s.buffs.push({id:"手动设置的首轮CD Buff",type:De.CDAddRatio,value:-n.extraBuff.FirstCDAddRatio,trigger:{type:Ue.BattleStart},removeTrigger:{type:Ue.WeaponReady},target:{type:Le.Self,args:n.id}}),l.push(s);for(let e of n.equips){let t=tt.state.equips[e];if(t)for(let e of t.buffs||[])s.buffs.push(e)}}}const a=30*e.config.time;let u={CV:-1,BB:-1},s={};for(let n=30*tt.state.config.delay.enter;n<a;++n)for(let e of l){let l=Xe(e.buffs,{ts:n,readyAt:e.readyAt,useAt:e.useAt}),a=e.reload*(1+(l.ReloadAddRatio||0)/100),i=1/(je(e.rawCD,a)*(1+Math.max(l.CDAddRatio||0,-100)/100))/30;e.progress+=i,e.progress>=1&&(e.progress=0,e.readyAt.push(n),(n/30).toFixed(4),e.refShip.name,u[e.cdType],s[e.id]={shipId:e.id,name:e.refShip.name,cdType:e.cdType,readyTs:n/30,useTs:0}),e.readyAt.length>e.useAt.length&&n>=u[e.cdType]&&(e.useAt.push(n),s[e.id].useTs=n/30,t.push(s[e.id]),e.cdType===Re.BB?(e.progress=0,u[e.cdType]=n+30*tt.state.config.commonCd.BB):u[e.cdType]=n+30*tt.state.config.commonCd.CV)}return t}function et(e,t){for(let l in t)switch(typeof t[l]){case"object":"object"==typeof e[l]?et(e[l],t[l]):e[l]=t[l];break;default:e[l]=t[l]}}const tt={state:q({shipTemplates:{},equips:{},equipOptions:[],ships:{},shipId:"",fleets:[],fleetIdx:0,config:{ignoreCommonEquips:!0,delay:{enter:1.5,CV:3.4,BB:1.2},duration:{CV:1,BB:3.2},commonCd:{CV:.6,BB:1.2},limit:{calculate:1e3,display:100}}}),chooseFleet(e){tt.state.fleetIdx=e},addShip(e){const t=tt.state.shipTemplates[e];let l={id:R(),templateId:e,name:t.name,lvl:120,mode:"auto",intimacy:"爱",reload:0};return l.reload=Me(l),tt.state.ships[l.id]=l,l},removeShip(e){delete tt.state.ships[e];for(let t of tt.state.fleets)for(let l of t.ships)l.id===e&&(l.id=null,l.equips=[0,0,0,0,0])},removeFleet(e){tt.state.fleets.splice(e,1),tt.state.fleetIdx===e&&e>0&&--tt.state.fleetIdx,0===tt.state.fleets.length&&this.addFleet()},addFleet(){let e={id:R(),name:"新舰队配置-"+(new Date).toLocaleString(),ships:[],buffs:[],config:{time:120,showTimeAsLeft:!1},tech:{BB:0,BC:0,BV:0,CV:0,CVL:0},targets:[]};for(let t=0;t<3;++t)e.ships.push({id:null,equips:[],extraBuff:{ReloadAddRatio:0,CDAddRatio:0}});return tt.state.fleets.push(e),tt.state.fleetIdx=tt.state.fleets.length-1,tt.state.fleets[tt.state.fleetIdx]},copyFleet(){let e=JSON.parse(JSON.stringify(tt.state.fleets[tt.state.fleetIdx]));return e.id=R(),e.name=e.name+" 复制",tt.state.fleets.push(e),tt.state.fleetIdx=tt.state.fleets.length-1,tt.state.fleets[tt.state.fleetIdx]},persist(){let e=JSON.stringify(tt.state);localStorage.setItem("STORE",e)},setup(){0===tt.state.fleets.length&&this.addFleet();try{let e=localStorage.getItem("STORE"),t=JSON.parse(e||"");et(tt.state,t),tt.state.fleets.forEach((e=>{["BC","BV"].forEach((t=>{"number"!=typeof e.tech[t]&&(e.tech[t]=e.tech.BB)}))}))}catch(e){this.addFleet()}(async function(){return(await T.get("./data/ships.json")).data})().then((e=>{tt.state.shipTemplates=e,Object.values(tt.state.shipTemplates).forEach((e=>{e.img=e.img.replace(/^(\/+)/,"./")}));for(let t of tt.state.fleets)t.targets||(t.targets=[])})),async function(){return(await T.get("./data/equips.json")).data}().then((e=>{tt.state.equips=e,Object.values(tt.state.equips).forEach((e=>{e.img=e.img.replace(/^(\/+)/,"./")}))}))}};tt.setup(),window.addEventListener("beforeunload",tt.persist);var lt=o({props:{equip:{type:Number,required:!0},cnt:{type:[Number,null],required:!1}},setup(e){const t=e,l=D((()=>tt.state.equips[t.equip]||{})),a=D((()=>{if(!l.value.name)return"－";let e=l.value.name+" T"+l.value.tech;return t.cnt&&(e="("+t.cnt+"*)"+e),e}));return(e,t)=>(p(),S("span",{class:I("equip rarity-"+v(l).rarity)},U(v(a)),3))}});const at={4:"战列",5:"战巡",6:"轻航",7:"正航",10:"航战"},ut={4:"战列炮",7:"战斗机",8:"鱼雷机",9:"轰炸机",101:"航母设备",102:"战列设备"},st=_("计算CD"),nt=["onClick"];var it=o({props:{ship:{type:null,required:!0},baseReload:{type:Number,required:!0},techReload:{type:Number,required:!0},extraBuffStats:{type:null,required:!0}},emits:["select"],setup(e,{emit:t}){const l=e,a=V(),u=tt.state.ships[l.ship.id],s=tt.state.shipTemplates[u.templateId];function n(e){let t=[],l=s.equipSlots[e];for(let a in tt.state.equips){let u=tt.state.equips[a];if(!(tt.state.config.ignoreCommonEquips&&u.rarity<=3)&&(He(l,u.type)||3===e&&u.type===Fe.auxiliaryCV&&(s.type===Ve.CV||s.type===Ve.CVL)||e>=3&&u.type===Fe.auxiliaryBB&&(s.type===Ve.BB||s.type===Ve.BC||s.type===Ve.BV))){let e=u.name+" T"+u.tech;l.length>1&&(e="("+ut[u.type]+")"+e),t.push({value:u.id,label:e,data:u})}}return t.sort(((e,t)=>e.data.type!=t.data.type?e.data.type-t.data.type:(e.data.cd||0)-(t.data.cd||0))),t.length>0&&e>=3&&t.push({value:0,label:"无",data:{}}),t}const i=[];for(let r=0;r<5;++r)i.push(n(r));const o=[],d=r({}),f=r([]),h=D((()=>f.value.slice(0,tt.state.config.limit.display)));function y(e){return Ge({id:l.ship.id,equips:e,extraBuff:{}},l.extraBuffStats)}function b(e,t){o[e]=t;let l=1,a=[];for(let u=0;u<5;++u){let e=o[u].length||1;i[u].length&&a.push(e),l*=e}d.value={total:l,desc:a.join("*")},l<50&&g()}function g(){d.value.total&&d.value.total>tt.state.config.limit.calculate?a.warning("选项数量过多!(当前限制为"+tt.state.config.limit.calculate+")"):(f.value=function(){let e=function(e,t){function l(e,l){let a=[];l&&0!==l.length||(l=[t]);for(let t of e)for(let e of l){let l=t.slice();l.push(e),a.push(l)}return a}let a=[[]];for(let u of e)a=l(a,u);return a}(o,0).map(y);return e.sort(((e,t)=>e.realCD-t.realCD)),e}(),d.value.updated=!0)}for(let r=0;r<5;++r){let e=l.ship.equips[r];o[r]=e?[e]:[]}function w(e,t){return k("div",{class:"equip rarity-"+e.data.rarity},{default:()=>e.label})}return b(0,o[0]),E((()=>[l.techReload,l.baseReload]),(()=>{f.value=[]})),(e,l)=>(p(),S("div",null,[(p(),S(L,null,O([0,1,2,3,4],(e=>m(v(F),{multiple:"",cascade:"",checkable:"",filterable:"","default-expand-all":"","check-strategy":"child","default-value":o[e],"onUpdate:value":t=>b(e,t),options:i[e],"max-tag-count":"responsive",disabled:0===i[e].length,"render-label":w},null,8,["default-value","onUpdate:value","options","disabled"]))),64)),_(" 总选项数量: "+U(d.value.desc)+"="+U(d.value.total)+" ",1),m(v(N),{type:"primary",onClick:l[0]||(l[0]=e=>g())},{default:c((()=>[st])),_:1}),C("table",null,[C("tbody",null,[(p(!0),S(L,null,O(v(h),(e=>(p(),S("tr",{onClick:l=>t("select",e.ids)},[(p(!0),S(L,null,O(e.ids,(e=>(p(),S("td",{key:e},[m(lt,{equip:e},null,8,["equip"])])))),128)),C("td",null,"面板CD "+U(e.dispCD),1),C("td",null,"实际CD "+U(e.realCD&&e.realCD.toFixed(4)),1)],8,nt)))),256))])])]))}});const ot={class:"ship-card"},rt={key:0},dt=["src","alt"],pt=C("br",null,null,-1),ft={key:1,class:"ship-card-image",style:{background:"#333"}};var ct=o({props:{template:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const t=e,l=D((()=>tt.state.shipTemplates[t.template])),a=D((()=>t.name||l.value.name));return(t,u)=>(p(),S("div",ot,[e.template>0?(p(),S("div",rt,[C("img",{class:"ship-card-image",src:v(l).img,alt:v(l).name},null,8,dt),pt])):(p(),S("div",ft)),_(" "+U(v(a)),1)]))}});const vt=_("选择舰娘"),ht={key:1},mt={style:{"text-align":"center"}},yt=C("br",null,null,-1),bt=_(" 装填 "),gt={class:"white"},Ct={key:0,class:"green"},wt={key:1,class:"blue"},Bt=C("br",null,null,-1),xt=C("br",null,null,-1),_t={title:"技能Buff(将自动计算装备Buff, 无需手动添加)"},kt=_("% "),At=_("% "),qt=_("% "),Rt=_("取消");var Tt=o({props:{ship:{type:null,required:!0},fleetBuffs:{type:Array,required:!0},tech:{type:null,required:!0}},emits:["ship-click","set-equips"],setup(e,{emit:t}){const l=e,a=D((()=>{if(l.ship.id)return tt.state.ships[l.ship.id]})),u=D((()=>Je(l.ship.equips))),s=D((()=>{var e;return Ke(l.tech,null==(e=d.value)?void 0:e.type)}));D((()=>a.value?a.value.reload+u.value+s.value:0));const n=D((()=>Ge(l.ship,i.value))),i=D((()=>{var e;if(a.value&&d.value){let t=$e(l.fleetBuffs,d.value);return t.ReloadAdd=(t.ReloadAdd||0)+Ke(l.tech,null==(e=d.value)?void 0:e.type),t.CDAddRatio=(t.CDAddRatio||0)-(l.ship.extraBuff.CDAddRatio||0),t.ReloadAddRatio=(t.ReloadAddRatio||0)+(l.ship.extraBuff.ReloadAddRatio||0),t}return{}})),o=D((()=>a.value?"auto"!==a.value.mode?"(手动输入)":"Lv"+a.value.lvl+" "+a.value.intimacy:"")),d=D((()=>a.value?tt.state.shipTemplates[a.value.templateId]:null));D((()=>d.value?at[d.value.type]:"未选择"));const h=r(!1),y=D((()=>"ES-"+l.ship.id));return(l,r)=>(p(),S(L,null,[v(a)?z("",!0):(p(),f(v(g),{key:0},{default:c((()=>[m(v(N),{onClick:r[0]||(r[0]=e=>t("ship-click"))},{default:c((()=>[vt])),_:1})])),_:1})),v(a)?(p(),S("div",ht,[m(v(g),{align:"center"},{default:c((()=>[m(ct,{template:v(a).templateId,name:v(a).name,onClick:r[1]||(r[1]=e=>t("ship-click"))},null,8,["template","name"]),C("div",mt,[_(U(v(o))+" ",1),yt,C("span",null,[bt,C("span",gt,U(v(a).reload),1),v(u)>0?(p(),S("span",Ct,"+"+U(v(u)),1)):z("",!0),v(s)>0?(p(),S("span",wt,"+"+U(v(s)),1)):z("",!0)]),Bt,_(" 面板CD "+U(v(n).dispCD)+" ",1),xt]),C("div",_t,[m(v(j),{label:"装填+","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:e.ship.extraBuff.ReloadAddRatio,"onUpdate:value":r[2]||(r[2]=t=>e.ship.extraBuff.ReloadAddRatio=t),style:{width:"100px"}},null,8,["value"]),kt])),_:1}),m(v(j),{label:"射速+","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:e.ship.extraBuff.CDAddRatio,"onUpdate:value":r[3]||(r[3]=t=>e.ship.extraBuff.CDAddRatio=t),style:{width:"100px"}},null,8,["value"]),At])),_:1}),m(v(j),{label:"首轮+","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:e.ship.extraBuff.FirstCDAddRatio,"onUpdate:value":r[4]||(r[4]=t=>e.ship.extraBuff.FirstCDAddRatio=t),style:{width:"100px"}},null,8,["value"]),qt])),_:1})]),C("div",null,"实际CD: "+U(v(n).realCD&&v(n).realCD.toFixed(4)),1),C("div",{onClick:r[5]||(r[5]=e=>h.value=!0),style:{cursor:"pointer"}},[(p(!0),S(L,null,O(e.ship.equips,((e,t)=>(p(),S("span",{key:e},[m(lt,{equip:e,cnt:v(d)&&v(d).equipCnt[t]},null,8,["equip","cnt"])])))),128))]),P(l.$slots,"default")])),_:3})])):z("",!0),v(a)&&v(d)?(p(),f(v($),{key:2,show:h.value,"onUpdate:show":r[8]||(r[8]=e=>h.value=e),"display-directive":"show","mask-closable":!1},{default:c((()=>[m(v(W),{style:{width:"90%"},title:"调整装备"},{"header-extra":c((()=>[m(v(N),{onClick:r[6]||(r[6]=e=>h.value=!1)},{default:c((()=>[Rt])),_:1})])),default:c((()=>[m(it,{key:v(y),ship:e.ship,baseReload:v(a).reload,techReload:v(s),extraBuffStats:v(i),onSelect:r[7]||(r[7]=e=>{t("set-equips",e),h.value=!1})},null,8,["ship","baseReload","techReload","extraBuffStats"])])),_:1})])),_:1},8,["show"])):z("",!0)],64))}});J("data-v-12107364");const Dt=_("删除");G();var St=o({props:{value:{type:null,required:!0},ships:{type:Array,required:!0}},emits:["delete"],setup(e,{emit:t}){const l=e;l.value.custom=l.value.custom||"",l.value.schedule=l.value.schedule||[20,20,20],l.value.weapon=l.value.weapon||{bindId:"",duration:8};const a=[{value:"schedule",label:"固定间隔"},{value:"custom",label:"自定义"},{value:"weapon",label:"绑定武器"}],u=D((()=>{let e=[];for(let t of l.ships){if(!t.id)continue;let l=tt.state.ships[t.id];e.push({value:l.id,label:l.name})}return e}));return(l,s)=>(p(),f(v(K),{inline:"",model:e.value,ref:(e,t)=>{t.formRef=e}},{default:c((()=>[m(v(g),null,{default:c((()=>[m(v(j),{label:"名称","label-placement":"left",path:"name"},{default:c((()=>[m(v(H),{value:e.value.name,"onUpdate:value":s[0]||(s[0]=t=>e.value.name=t)},null,8,["value"])])),_:1}),m(v(j),{"label-placement":"left",path:"name"},{default:c((()=>[m(v(F),{options:a,value:e.value.type,"onUpdate:value":s[1]||(s[1]=t=>e.value.type=t)},null,8,["value"])])),_:1}),"schedule"===e.value.type?(p(),S(L,{key:0},[m(v(j),{label:"间隔","label-placement":"left",path:"name"},{default:c((()=>[m(v(M),{key:"schedule[0]","default-value":e.value.schedule[0],onUpdateValue:s[2]||(s[2]=t=>e.value.schedule[0]=t||0)},null,8,["default-value"])])),_:1}),m(v(j),{label:"持续","label-placement":"left",path:"name"},{default:c((()=>[m(v(M),{key:"schedule[1]","default-value":e.value.schedule[1],onUpdateValue:s[3]||(s[3]=t=>e.value.schedule[1]=t||0)},null,8,["default-value"])])),_:1}),m(v(j),{label:"首轮CD","label-placement":"left",path:"name"},{default:c((()=>[m(v(M),{key:"schedule[2]","default-value":e.value.schedule[2],onUpdateValue:s[4]||(s[4]=t=>e.value.schedule[2]=t||0)},null,8,["default-value"])])),_:1})],64)):"custom"===e.value.type?(p(),f(v(j),{key:1,label:"时间","label-placement":"left",path:"name"},{default:c((()=>[m(v(H),{value:e.value.custom,"onUpdate:value":s[5]||(s[5]=t=>e.value.custom=t),style:{width:"300px","flex-shrink":"0.5"}},null,8,["value"])])),_:1})):(p(),S(L,{key:2},[m(v(j),{label:"目标","label-placement":"left",path:"name"},{default:c((()=>[m(v(F),{"fallback-option":()=>!1,style:{"min-width":"100px"},options:v(u),value:e.value.weapon.bindId,"onUpdate:value":s[6]||(s[6]=t=>e.value.weapon.bindId=t)},null,8,["fallback-option","options","value"])])),_:1}),m(v(j),{label:"延迟","label-placement":"left",path:"name"},{default:c((()=>[m(v(M),{value:e.value.weapon.delay,"onUpdate:value":s[7]||(s[7]=t=>e.value.weapon.delay=t)},null,8,["value"])])),_:1}),m(v(j),{label:"持续","label-placement":"left",path:"name"},{default:c((()=>[m(v(M),{value:e.value.weapon.duration,"onUpdate:value":s[8]||(s[8]=t=>e.value.weapon.duration=t)},null,8,["value"])])),_:1})],64)),m(v(N),{type:"error",onClick:s[9]||(s[9]=e=>t("delete"))},{default:c((()=>[Dt])),_:1})])),_:1})])),_:1},8,["model"]))}});St.__scopeId="data-v-12107364",J("data-v-04e25a93");const Ut={id:"chart-footer"};G();var It=o({props:{fleet:{type:null,required:!0},height:{type:Number,required:!0}},setup(e){const a=e,u=r(null);let s;Z([Y,ee,te,le,ae,ue,se]);var n={showTimeAsLeft:!1,maxDuration:180,selected:[0,0]};let o=D((()=>tt.state.config));function d(e,t){var l=t.value(0),a=t.coord([t.value(1),l]),u=t.coord([t.value(2),l]),s=.8*t.size([0,1])[1],n=ne({x:a[0],y:a[1]-s/2,width:u[0]-a[0],height:s},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return n&&{type:"rect",transition:["shape"],shape:n,style:{fill:"#368c6c"}}}function f(e,t=3){return parseFloat(e).toFixed(t).replace(/0+$/,"").replace(/\.$/,"")}function c(e){if(e<0)return"-"+c(-e);var t="00"+Math.floor(e/60);t=t.substr(t.length-2);var l="00"+Math.floor(e%60);l=l.substr(l.length-2);var a=e%1;return a&&(l+=a.toFixed(2).substr(1)),t+":"+l}const v={tooltip:{formatter:function(e){var t;return t=n.showTimeAsLeft?`: ${c(n.maxDuration-e.value[1])} ~ ${c(n.maxDuration-e.value[2])}`:`: ${f(e.value[1])}s~${f(e.value[2])}s`,e.marker+e.name+t}},dataZoom:[{type:"slider",filterMode:"weakFilter",showDataShadow:!1,labelFormatter:""},{type:"inside",filterMode:"weakFilter"}],xAxis:{type:"value",min:0,scale:!0,axisPointer:{show:!0,snap:!1,triggerTooltip:!1},axisLabel:{formatter:function(e){return n.showTimeAsLeft&&(e=n.maxDuration-e),c(e)}}},yAxis:{data:[]}};function h(e,t){let l=[];if("schedule"===e.type){let[t,a,u]=e.schedule;if(!t||t<=0)return l;for(let s=u;s<n.maxDuration;s+=t)l.push({name:e.name,value:[e.name,s,s+a,a]});return l}if("custom"===e.type){let t=e.custom.match(/(\d+(\.\d+)?)/g);if(!t)return l;for(let a=0;a<t.length;a+=2){let u=parseFloat(t[a]),s=parseFloat(t[a+1]);isNaN(s)||l.push({name:e.name,value:[e.name,u,s,s-u]})}return l}if("weapon"===e.type){t||(t=Ye(a.fleet));for(let a of t)if(a.shipId===e.weapon.bindId){let t=a.useTs+e.weapon.delay;l.push({name:e.name,value:[e.name,t,t+e.weapon.duration,e.weapon.duration]})}return l}return[]}let m;function y(){if(!s)return;n.maxDuration=a.fleet.config.time,n.showTimeAsLeft=a.fleet.config.showTimeAsLeft;let e={},u=[];m=[];for(let t of a.fleet.ships)if(t.id){let l=tt.state.ships[t.id].name;e[l]=1,m.push(l)}let r=Ye(a.fleet);for(let t of r){e[t.name]||(e[t.name]=1,m.push(t.name));let l=t.useTs+o.value.delay[t.cdType],a=o.value.duration[t.cdType],s={name:t.name,id:t.shipId,value:[t.name,l,l+a,a]};u.push(s)}for(let s of a.fleet.targets)e[s.name]?(e[s.name]+=1,p=i({},s),f={name:s.name+" "+e[s.name]},s=t(p,l(f))):e[s.name]=1,m.push(s.name),u.push(...h(s,r));var p,f;s.setOption({series:[{type:"custom",renderItem:d,itemStyle:{opacity:.8},encode:{x:[1,2],y:0},data:u}],xAxis:{max:n.maxDuration},yAxis:{data:m,inverse:!0}})}function b(){s.setOption({graphic:{id:"bg",type:"rect",shape:{x:0,y:0,width:0,height:0}}}),n.selected=[0,0]}function g(){s&&(b(),s.resize())}return E((()=>a.height),g),window.addEventListener("resize",g),Q((()=>{let e=document.getElementById("align-chart");e&&(s=X(e),s.setOption(v),g(),y(),s.on("click",(function(e){e.value&&(n.selected[0]!==e.value[1]||n.selected[1]!==e.value[2]?(n.selected=[e.value[1],e.value[2]],function(){let e=s.convertToPixel({xAxisIndex:0,yAxisIndex:0},[n.selected[0],m.length]),t=s.convertToPixel({xAxisIndex:0,yAxisIndex:0},[n.selected[1],-1]),l=(t[1]-e[1])/m.length;s.setOption({graphic:{id:"bg",type:"rect",shape:{x:e[0],y:e[1]+.4*l,width:t[0]-e[0],height:l*(m.length-.8)},style:{fill:"rgba(0,0,0,0.3)"}}})}()):b())})),s.on("datazoom",b))})),E(a,y),(e,t)=>(p(),S("div",Ut,[C("div",{id:"align-chart",ref:(e,t)=>{t.chartRef=e,u.value=e},class:"chart-box"},null,512)]))}});It.__scopeId="data-v-04e25a93",J("data-v-4970658a");const Vt={id:"fleet-container",style:{padding:"20px 20px 400px 20px"}},Et=_("选择"),Lt=_("添加"),Ot=_("复制"),Ft=_("删除"),Nt=_("上移"),zt=_("舰队科技加成: "),jt=_("将自动计算舰娘技能:"),Mt=_(" 对轴目标列表 "),Pt=C("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[C("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("circle",{cx:"12",cy:"12",r:"9"}),C("path",{d:"M12 17v.01"}),C("path",{d:"M12 13.5a1.5 1.5 0 0 1 1-1.5a2.6 2.6 0 1 0-3-4"})])],-1),Wt=_(": "),$t=_("添加"),Jt=_("取消"),Gt=_(" 固定间隔设置较为直观, 例如海妈旧轴为 20,10,20; 海妈新轴为 20,10,16. "),Ht=C("br",null,null,-1),Kt=C("br",null,null,-1),Zt=_(" 绑定武器设置中, 延迟是从使用武器的时间开始计算的, 如果是命中后生效的技能(例如公爵的易伤Buff)需要自行填写命中的延迟时间. "),Qt=C("br",null,null,-1),Xt=C("br",null,null,-1),Yt=_(" 自定义设置的格式为任意符号分隔的数字列表, 每两个数字表示一组起止时间. "),el=C("br",null,null,-1),tl=_(" 个人简单测试的苍龙Meta轴为(不保证准确性): 0,4;14,16;25,28;37,39;43,50;60,62;69,76 "),ll=C("br",null,null,-1),al=_(" 如果需要更多数据, 建议参考碧蓝航线Wiki ("),ul=C("a",{target:"_blank",href:"https://wiki.biligame.com/blhx/%E4%BD%99%E7%83%ACboss%E6%94%BB%E7%95%A5%E8%A6%81%E7%82%B9"},"Meta",-1),sl=_(" / "),nl=C("a",{target:"_blank",href:"https://wiki.biligame.com/blhx/%E5%A4%A7%E8%88%B0%E9%98%9F#.E4.BD.9C.E6.88.98"},"大舰队Boss",-1),il=_(") 或自行录屏分析. ");G();var ol=o({setup(e){const t=V(),l=ie(),a=D((()=>tt.state.fleets[tt.state.fleetIdx])),u=D((()=>tt.state.fleets.map(((e,t)=>({value:t,label:e.name}))))),s=r(400);function n(){let e=Math.round(Math.min(.4*document.body.clientHeight,400)),t=document.getElementById("fleet-container");t&&(t.style.paddingBottom=e+"px");let l=document.getElementById("chart-footer");l&&(l.style.height=e+"px"),s.value=e}window.addEventListener("resize",n),Q((()=>{n(),setTimeout(n,500)}));const i=r(!1);let o=r(0);const d=r(a.value.buffs),h=r([]);D((()=>[...d.value,...h.value]));const y=D((()=>tt.state.ships));function b(e){for(let t of a.value.ships)if(t&&t.id===e.id)return!1;return!0}function B(e){let t=a.value.ships[o.value];if(e){t.id=e.id,t.buffs=(l=tt.state.shipTemplates[e.templateId].buffs||[],JSON.parse(JSON.stringify(l)));for(let l of t.buffs)l.target.type===Le.Self&&(l.target.args=e.templateId)}else t.id=null,t.buffs=[];var l;t.equips=[0,0,0,0,0],i.value=!1}const x=D((()=>{let e=[];for(let t of a.value.ships){if(!t.id)continue;let l=tt.state.ships[t.id];for(let a of t.buffs||[])e.push({from:l.name,name:a.name})}return e})),k=r(!1);return(e,n)=>(p(),S(L,null,[C("div",Vt,[m(v(j),{"label-placement":"left",path:"fleet.name"},{default:c((()=>[m(v(oe),{value:v(tt).state.fleetIdx,"onUpdate:value":n[0]||(n[0]=e=>v(tt).state.fleetIdx=e),options:v(u),placement:"bottom-start",trigger:"click"},{default:c((()=>[m(v(N),null,{default:c((()=>[Et])),_:1})])),_:1},8,["value","options"]),m(v(H),{value:v(a).name,"onUpdate:value":n[1]||(n[1]=e=>v(a).name=e)},null,8,["value"]),m(v(N),{onClick:n[2]||(n[2]=e=>(tt.addFleet(),void t.success("已添加舰队 "+a.value.name)))},{default:c((()=>[Lt])),_:1}),m(v(N),{onClick:n[3]||(n[3]=e=>(tt.copyFleet(),void t.success("已复制舰队 "+a.value.name)))},{default:c((()=>[Ot])),_:1}),m(v(N),{type:"error",onClick:n[4]||(n[4]=e=>{l.warning({title:"警告",content:"确定删除当前舰队配置?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{tt.removeFleet(tt.state.fleetIdx),t.success("已删除")}})})},{default:c((()=>[Ft])),_:1})])),_:1}),(p(!0),S(L,null,O(v(a).ships,((e,t)=>{var l;return p(),f(v(de),{key:null!=(l=e.id)?l:void 0},{default:c((()=>[m(v(re),{span:24},{default:c((()=>[m(Tt,{ship:e,fleetBuffs:d.value,tech:v(a).tech,onShipClick:e=>function(e){o.value=e,i.value=!0}(t),onSetEquips:e=>function(e,t){a.value.ships[e].equips=t}(t,e)},{default:c((()=>[t>0?(p(),f(v(N),{key:0,onClick:e=>function(e){let t=a.value.ships[e];a.value.ships[e]=a.value.ships[e-1],a.value.ships[e-1]=t}(t)},{default:c((()=>[Nt])),_:2},1032,["onClick"])):z("",!0)])),_:2},1032,["ship","fleetBuffs","tech","onShipClick","onSetEquips"])])),_:2},1024)])),_:2},1024)})),128)),zt,m(v(g),null,{default:c((()=>[m(v(j),{label:"轻航装填","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).tech.CVL,"onUpdate:value":n[5]||(n[5]=e=>v(a).tech.CVL=e)},null,8,["value"])])),_:1}),m(v(j),{label:"正航装填","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).tech.CV,"onUpdate:value":n[6]||(n[6]=e=>v(a).tech.CV=e)},null,8,["value"])])),_:1}),m(v(j),{label:"战列装填","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).tech.BB,"onUpdate:value":n[7]||(n[7]=e=>v(a).tech.BB=e)},null,8,["value"])])),_:1}),m(v(j),{label:"战巡装填","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).tech.BC,"onUpdate:value":n[8]||(n[8]=e=>v(a).tech.BC=e)},null,8,["value"])])),_:1}),m(v(j),{label:"航战装填","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).tech.BV,"onUpdate:value":n[9]||(n[9]=e=>v(a).tech.BV=e)},null,8,["value"])])),_:1})])),_:1}),v(x).length>0?(p(),f(v(g),{key:0,style:{"background-color":"antiquewhite"}},{default:c((()=>[m(v(w),null,{default:c((()=>[jt])),_:1}),(p(!0),S(L,null,O(v(x),(e=>(p(),f(v(pe),null,{default:c((()=>[_(U(e.name),1)])),_:2},1024)))),256))])),_:1})):z("",!0),m(v(g),null,{default:c((()=>[Mt,m(v(fe),{size:20,style:{cursor:"pointer"},onClick:n[10]||(n[10]=e=>k.value=!0)},{default:c((()=>[Pt])),_:1}),Wt,m(v(j),{label:"时间","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:v(a).config.time,"onUpdate:value":n[11]||(n[11]=e=>v(a).config.time=e)},null,8,["value"])])),_:1}),m(v(j),{label:"按剩余时间展示","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(ce),{value:v(a).config.showTimeAsLeft,"onUpdate:value":n[12]||(n[12]=e=>v(a).config.showTimeAsLeft=e)},null,8,["value"])])),_:1}),m(v(N),{onClick:n[13]||(n[13]=e=>{a.value.targets.push({name:"20s轴",type:"schedule",schedule:[20,10,20],custom:"",weapon:{bindId:"",delay:0,duration:8}})})},{default:c((()=>[$t])),_:1})])),_:1}),(p(!0),S(L,null,O(v(a).targets,((e,t)=>(p(),f(v(g),{key:e.name},{default:c((()=>[m(St,{ships:v(a).ships,value:e,onDelete:e=>v(a).targets.splice(t,1)},null,8,["ships","value","onDelete"])])),_:2},1024)))),128))]),m(It,{height:s.value,fleet:v(a)},null,8,["height","fleet"]),m(v($),{show:i.value,"onUpdate:show":n[16]||(n[16]=e=>i.value=e),"display-directive":"show"},{default:c((()=>[m(v(W),{style:{width:"90%"},title:"选择舰娘"},{"header-extra":c((()=>[m(v(N),{onClick:n[14]||(n[14]=e=>i.value=!1)},{default:c((()=>[Jt])),_:1})])),default:c((()=>[m(v(ye),{"x-gap":"2",cols:"2 400:3 600:4 800:5 1000:6 1200:12"},{default:c((()=>[m(v(ve),{bordered:!1,class:"ship-card",onClick:n[15]||(n[15]=e=>B(null))},{default:c((()=>[m(ct,{template:0,name:"取消选择"})])),_:1}),(p(!0),S(L,null,O(v(y),(e=>he((p(),f(v(ve),{key:e.id,bordered:!1,class:"ship-card",onClick:t=>B(e)},{default:c((()=>[m(ct,{template:e.templateId,name:e.name},null,8,["template","name"])])),_:2},1032,["onClick"])),[[me,b(e)]]))),128))])),_:1})])),_:1})])),_:1},8,["show"]),m(v($),{show:k.value,"onUpdate:show":n[17]||(n[17]=e=>k.value=e),"display-directive":"show"},{default:c((()=>[m(v(W),{style:{width:"90%"},title:"对轴目标说明"},{default:c((()=>[Gt,Ht,Kt,Zt,Qt,Xt,Yt,el,tl,ll,al,ul,sl,nl,il])),_:1})])),_:1},8,["show"])],64))}});ol.__scopeId="data-v-4970658a";const rl=["src","alt"],dl=_("输入"),pl=_("自动"),fl=_("  "),cl=_("陌生"),vl=_("友好"),hl=_("喜欢"),ml=_("爱"),yl=_("誓约"),bl=_("200");var gl=o({props:{ship:{type:null,required:!0}},emits:["update:value"],setup(e,{emit:t}){const l=e,a=D((()=>tt.state.shipTemplates[l.ship.templateId])),u=r(l.ship);return E([u.value],(()=>{if("auto"===u.value.mode){let e=Me(u.value);u.value.reload=e}t("update:value",u.value)}),{immediate:!0}),(e,t)=>(p(),f(v(g),null,{default:c((()=>[C("img",{src:v(a).img,alt:v(a).name,style:{"border-radius":"10px",width:"80px",height:"80px"}},null,8,rl),m(v(g),null,{default:c((()=>[m(v(j),{path:"name","show-feedback":!1,"label-placement":"left",style:{"min-width":"120px"}},{default:c((()=>[m(v(H),{value:u.value.name,"onUpdate:value":t[0]||(t[0]=e=>u.value.name=e)},null,8,["value"])])),_:1}),m(v(j),{path:"mode","show-feedback":!1,"label-placement":"left"},{default:c((()=>[m(v(be),{value:u.value.mode,"onUpdate:value":t[1]||(t[1]=e=>u.value.mode=e)},{default:c((()=>[m(v(ge),{size:"small",value:"input"},{default:c((()=>[dl])),_:1}),m(v(ge),{size:"small",value:"auto"},{default:c((()=>[pl])),_:1})])),_:1},8,["value"])])),_:1}),m(v(j),{label:"装填",path:"reload","show-feedback":!1,"label-placement":"left"},{default:c((()=>[m(v(M),{value:u.value.reload,"onUpdate:value":t[2]||(t[2]=e=>u.value.reload=e),disabled:"auto"==u.value.mode,class:"short-num-input",style:{width:"200px"}},null,8,["value","disabled"])])),_:1})])),_:1}),"auto"===u.value.mode?(p(),f(v(g),{key:0},{default:c((()=>[m(v(j),{label:"等级",path:"lvl","show-feedback":!1,"label-placement":"left"},{default:c((()=>[m(v(M),{min:100,max:125,value:u.value.lvl,"onUpdate:value":t[3]||(t[3]=e=>u.value.lvl=e),disabled:"auto"!=u.value.mode,class:"short-num-input",style:{width:"200px"}},null,8,["value","disabled"]),fl,m(v(Ce),{value:u.value.lvl,"onUpdate:value":t[4]||(t[4]=e=>u.value.lvl=e),min:100,max:125,disabled:"auto"!=u.value.mode,style:{width:"200px"},tooltip:!1},null,8,["value","disabled"])])),_:1}),m(v(j),{path:"intimacy","show-feedback":!1,"label-placement":"left"},{default:c((()=>[m(v(be),{value:u.value.intimacy,"onUpdate:value":t[5]||(t[5]=e=>u.value.intimacy=e),disabled:"auto"!=u.value.mode},{default:c((()=>[m(v(ge),{class:"intimacy-option",size:"small",value:"陌生"},{default:c((()=>[cl])),_:1}),m(v(ge),{class:"intimacy-option",size:"small",value:"友好"},{default:c((()=>[vl])),_:1}),m(v(ge),{class:"intimacy-option",size:"small",value:"喜欢"},{default:c((()=>[hl])),_:1}),m(v(ge),{class:"intimacy-option",size:"small",value:"爱"},{default:c((()=>[ml])),_:1}),m(v(ge),{class:"intimacy-option",size:"small",value:"誓约"},{default:c((()=>[yl])),_:1}),m(v(ge),{class:"intimacy-option",size:"small",value:"誓约200"},{default:c((()=>[bl])),_:1})])),_:1},8,["value","disabled"])])),_:1})])),_:1})):z("",!0)])),_:1}))}});const Cl={style:{padding:"20px"}},wl=_("删除"),Bl=C("hr",null,null,-1),xl=_("添加舰娘"),_l=_("取消"),kl=C("br",null,null,-1);var Al=o({setup(e){const t=r(!1),l=D((()=>tt.state.ships)),a=r("");function u(e){return!a.value||0===a.value.length||e.match.indexOf(a.value)>-1}const s=D((()=>{let e=[];for(let t in tt.state.shipTemplates){let l=i({},tt.state.shipTemplates[t]);l.key=l.id,e.push(l)}return e}));const n=r(null);return(e,i)=>(p(),S(L,null,[C("div",Cl,[(p(!0),S(L,null,O(v(l),((e,t)=>(p(),f(v(de),{key:e.id},{default:c((()=>[m(v(re),{span:21},{default:c((()=>[m(gl,{key:e.id,ship:e,"onUpdate:modelValue":t=>v(l)[e.id]=t},null,8,["ship","onUpdate:modelValue"])])),_:2},1024),m(v(re),{span:3},{default:c((()=>[m(v(N),{onClick:t=>function(e){tt.removeShip(e)}(e.id),type:"error"},{default:c((()=>[wl])),_:2},1032,["onClick"])])),_:2},1024),Bl])),_:2},1024)))),128)),m(v(g),{justify:"center"},{default:c((()=>[m(v(N),{onClick:i[0]||(i[0]=e=>(t.value=!0,void setTimeout((()=>{n.value&&n.value.focus()}),2)))},{default:c((()=>[xl])),_:1})])),_:1})]),m(v($),{show:t.value,"onUpdate:show":i[3]||(i[3]=e=>t.value=e),"display-directive":"show"},{default:c((()=>[m(v(W),{style:{width:"90%"},title:"添加舰娘"},{"header-extra":c((()=>[m(v(N),{onClick:i[1]||(i[1]=e=>t.value=!1)},{default:c((()=>[_l])),_:1})])),default:c((()=>[m(v(j),{"label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(H),{ref:(e,t)=>{t.searchRef=e,n.value=e},value:a.value,"onUpdate:value":i[2]||(i[2]=e=>a.value=e),placeholder:"搜索舰娘名称/拼音"},null,8,["value"])])),_:1}),kl,m(v(ye),{"x-gap":"2",cols:"2 400:3 600:4 800:5 1000:6 1200:12"},{default:c((()=>[(p(!0),S(L,null,O(v(s),(e=>he((p(),f(v(ve),{key:e.id,bordered:!1,class:"ship-card",onClick:l=>{return a=e.key,tt.addShip(a),void(t.value=!1);var a}},{default:c((()=>[m(ct,{template:e.key},null,8,["template"])])),_:2},1032,["onClick"])),[[me,u(e)]]))),128))])),_:1}),0==v(s).length?(p(),f(v(we),{key:0})):z("",!0)])),_:1})])),_:1},8,["show"])],64))}});const ql={style:{padding:"20px"}},Rl=C("span",null,"命中延迟时间",-1),Tl=C("span",null,"攻击持续时间",-1),Dl=C("span",null,"公共CD",-1),Sl=C("span",null,"选项数量限制",-1),Ul=_("重置舰队数据"),Il=_("重置全部数据"),Vl=C("div",null,[_(" 项目代码已发布在Github: "),C("a",{href:"https://github.com/AzurLaneTools/AzurLaneCDTool",target:"_blank"},"AzurLaneTools/AzurLaneCDTool"),_(". "),C("br"),_(" 使用中有相关问题, 可以"),C("a",{href:"https://github.com/AzurLaneTools/AzurLaneCDTool/issues/new",target:"_blank"},"通过Issue反馈"),_(". ")],-1);const El=[{path:"/",component:ol},{path:"/ships",component:Al},{path:"/config",component:o({setup(e){const t=r(tt.state.config),l=V();return(e,a)=>(p(),S("div",ql,[m(v(j),{label:"忽略低星装备","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(ce),{value:t.value.ignoreCommonEquips,"onUpdate:value":a[0]||(a[0]=e=>t.value.ignoreCommonEquips=e)},null,8,["value"])])),_:1}),m(v(j),{label:"公共进图延迟","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.delay.enter,"onUpdate:value":a[1]||(a[1]=e=>t.value.delay.enter=e)},null,8,["value"])])),_:1}),m(v(g),null,{default:c((()=>[Rl,m(v(j),{label:"航母","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.delay.CV,"onUpdate:value":a[2]||(a[2]=e=>t.value.delay.CV=e)},null,8,["value"])])),_:1}),m(v(j),{label:"战列","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.delay.BB,"onUpdate:value":a[3]||(a[3]=e=>t.value.delay.BB=e)},null,8,["value"])])),_:1})])),_:1}),m(v(g),null,{default:c((()=>[Tl,m(v(j),{label:"航母","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.duration.CV,"onUpdate:value":a[4]||(a[4]=e=>t.value.duration.CV=e)},null,8,["value"])])),_:1}),m(v(j),{label:"战列","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.duration.BB,"onUpdate:value":a[5]||(a[5]=e=>t.value.duration.BB=e)},null,8,["value"])])),_:1})])),_:1}),m(v(g),null,{default:c((()=>[Dl,m(v(j),{label:"航母","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.commonCd.CV,"onUpdate:value":a[6]||(a[6]=e=>t.value.commonCd.CV=e)},null,8,["value"])])),_:1}),m(v(j),{label:"战列","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{value:t.value.commonCd.BB,"onUpdate:value":a[7]||(a[7]=e=>t.value.commonCd.BB=e)},null,8,["value"])])),_:1})])),_:1}),m(v(g),null,{default:c((()=>[Sl,m(v(j),{label:"最大计算数量","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{min:100,value:t.value.limit.calculate,"onUpdate:value":a[8]||(a[8]=e=>t.value.limit.calculate=e)},null,8,["value"])])),_:1}),m(v(j),{label:"最大展示数量","label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(M),{min:50,value:t.value.limit.display,"onUpdate:value":a[9]||(a[9]=e=>t.value.limit.display=e)},null,8,["value"])])),_:1})])),_:1}),m(v(j),{"label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(N),{onClick:a[10]||(a[10]=e=>(tt.state.fleets=[],tt.addFleet(),void l.success("已重置")))},{default:c((()=>[Ul])),_:1})])),_:1}),m(v(j),{"label-placement":"left","show-feedback":!1},{default:c((()=>[m(v(N),{onClick:a[11]||(a[11]=e=>(window.removeEventListener("beforeunload",tt.persist),localStorage.removeItem("STORE"),l.success("已重置"),void window.location.reload()))},{default:c((()=>[Il])),_:1})])),_:1}),Vl]))}})}],Ll=Be({history:xe(),routes:El}),Ol=_e(ze);Ol.use(Ll),Ol.mount("#app");
